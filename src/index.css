@import "tailwindcss";

/* ── Theme: Dark (default) ── */
[data-theme="dark"] {
  --color-bg-primary: #191919;
  --color-bg-secondary: #202020;
  --color-bg-surface: #262626;
  --color-bg-hover: #2c2c2c;
  --color-bg-active: #333333;
  --color-text-primary: #e3e2de;
  --color-text-secondary: #9b9a97;
  --color-text-muted: #6b6b60;
  --color-border: #2f2f2f;
  --color-border-focus: #529cca;
  --color-accent: #529cca;
  --color-bg-overlay: rgba(19, 19, 19, var(--panel-opacity, 0.82));
}

/* ── Theme: OLED (pure black) ── */
[data-theme="oled"] {
  --color-bg-primary: #000000;
  --color-bg-secondary: #0a0a0a;
  --color-bg-surface: #141414;
  --color-bg-hover: #1a1a1a;
  --color-bg-active: #222222;
  --color-text-primary: #e3e2de;
  --color-text-secondary: #9b9a97;
  --color-text-muted: #5a5a54;
  --color-border: #1a1a1a;
  --color-border-focus: #529cca;
  --color-accent: #529cca;
  --color-bg-overlay: rgba(0, 0, 0, var(--panel-opacity, 0.82));
}

/* ── Theme: White (light) ── */
[data-theme="white"] {
  --color-bg-primary: #ffffff;
  --color-bg-secondary: #f5f5f5;
  --color-bg-surface: #eeeeee;
  --color-bg-hover: #e4e4e4;
  --color-bg-active: #d8d8d8;
  --color-text-primary: #1a1a1a;
  --color-text-secondary: #555555;
  --color-text-muted: #888888;
  --color-border: #e0e0e0;
  --color-border-focus: #2196f3;
  --color-accent: #2196f3;
  --color-bg-overlay: rgba(245, 245, 245, var(--panel-opacity, 0.82));
}

/* ── Speaker color CSS variables ── */
:root {
  --speaker-chief: #9b59b6;
  --speaker-chief-bg: #2d1b42;
  --speaker-art: #00bcd4;
  --speaker-art-bg: #003d45;
  --speaker-plan: #ff9800;
  --speaker-plan-bg: #3d2000;
  --speaker-level: #4caf50;
  --speaker-level-bg: #0d2e0d;
  --speaker-prog: #2196f3;
  --speaker-prog-bg: #0d1f3c;
}

/* ── Typing indicator pulse animation ── */
@keyframes pulse {
  0%, 100% { opacity: 0.3; transform: scale(0.85); }
  50%       { opacity: 1;   transform: scale(1.1); }
}

/* ── Streaming cursor blink animation ── */
@keyframes blink {
  0%, 100% { opacity: 0.8; }
  50%       { opacity: 0; }
}

@layer base {
  * {
    box-sizing: border-box;
    border-color: var(--color-border);
  }

  body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    background: var(--color-bg-primary);
    color: var(--color-text-primary);
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    font-size: 14px;
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
  }

  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  ::-webkit-scrollbar-track {
    background: transparent;
  }
  ::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 3px;
  }
  ::-webkit-scrollbar-thumb:hover {
    background: var(--color-text-muted);
  }

  ::selection {
    background: color-mix(in srgb, var(--color-accent) 25%, transparent);
  }

  textarea::placeholder {
    color: var(--color-text-muted);
    opacity: 0.5;
  }
}

/* ── Vault document markdown styles ── */
.prose-vault p {
  margin: 0.25em 0;
}
.prose-vault ul,
.prose-vault ol {
  margin: 0.25em 0;
  padding-left: 1.5em;
}
.prose-vault ul { list-style-type: disc; }
.prose-vault ul ul { list-style-type: circle; }
.prose-vault ul ul ul { list-style-type: square; }
.prose-vault ol { list-style-type: decimal; }
.prose-vault li {
  margin: 0.1em 0;
}
.prose-vault strong {
  color: var(--color-text-primary);
  font-weight: 600;
}
.prose-vault em {
  font-style: italic;
}
.prose-vault code {
  background: var(--color-bg-active);
  padding: 0.1em 0.35em;
  border-radius: 3px;
  font-size: 0.9em;
}
.prose-vault pre {
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border);
  border-radius: 6px;
  padding: 0.75em 1em;
  overflow-x: auto;
  margin: 0.5em 0;
}
.prose-vault pre code {
  background: none;
  padding: 0;
}
.prose-vault blockquote {
  border-left: 3px solid var(--color-border);
  padding-left: 0.75em;
  margin: 0.5em 0;
  color: var(--color-text-muted);
}
.prose-vault h1, .prose-vault h2, .prose-vault h3,
.prose-vault h4, .prose-vault h5, .prose-vault h6 {
  color: var(--color-text-primary);
  margin: 0.75em 0 0.25em;
  font-weight: 600;
}
.prose-vault h3 { font-size: 1.1em; }
.prose-vault h4 { font-size: 1em; }
.prose-vault hr {
  border: none;
  border-top: 1px solid var(--color-border);
  margin: 0.75em 0;
}

/* ── Vault/Chat table: block-scroll so wide tables don't break layout ── */
.prose-vault table,
.prose-chat table {
  display: block;
  overflow-x: auto;
  max-width: 100%;
  border-collapse: collapse;
}
.prose-vault th, .prose-vault td,
.prose-chat th, .prose-chat td {
  border: 1px solid var(--color-border);
  padding: 0.3em 0.6em;
  text-align: left;
}

/* ── Chat bubble overrides: lighter weight, tighter spacing ── */
.prose-chat strong { font-weight: 500; }
.prose-chat h1, .prose-chat h2, .prose-chat h3,
.prose-chat h4, .prose-chat h5, .prose-chat h6 {
  font-weight: 500;
  font-size: 1em;
  margin: 0.4em 0 0.15em;
}
.prose-chat p { margin: 0.15em 0; }
.prose-chat ul, .prose-chat ol { margin: 0.15em 0; }
.prose-chat li { margin: 0; }

/* ── Fast mode: disable expensive GPU operations ── */
[data-perf="fast"] * {
  backdrop-filter: none \!important;
  -webkit-backdrop-filter: none \!important;
  box-shadow: none \!important;
  text-shadow: none \!important;
  filter: none \!important;
}
