import { useMemo, useCallback } from 'react'
import { useChatStore } from '@/stores/chatStore'

const QUICK_QUESTIONS = [
  // 기술 & 성능
  '현재 가장 큰 기술적 병목은 무엇인가요?',
  '성능 최적화 현황을 요약해주세요.',
  '현재 프레임률 이슈가 있는 구간은?',
  '메모리 사용량이 목표 범위 안에 있나요?',
  '빌드 파이프라인에 문제가 있나요?',
  '기술 부채 중 당장 해결해야 할 항목은?',
  '크래시 리포트에서 반복되는 패턴이 있나요?',
  '외부 미들웨어나 SDK 연동 이슈가 있나요?',
  '로딩 시간을 줄일 수 있는 방법은?',
  '드로우콜 최적화 여지가 있는 곳은?',
  '셰이더 컴파일 히치가 발생하는 구간이 있나요?',
  '물리 시뮬레이션 성능에 이상 징후는 없나요?',
  '네트워크 레이턴시 이슈가 플레이에 영향을 주나요?',
  '에디터 빌드 시간이 너무 길어진 원인은?',
  '프로파일러 결과에서 핫스팟은 어디인가요?',

  // QA & 버그
  '현재 미해결 버그 중 우선순위가 높은 것은?',
  'QA에서 최근 발견된 핵심 이슈는?',
  '재현 빈도가 높은 버그 유형은 무엇인가요?',
  '회귀 테스트 커버리지가 부족한 영역은?',
  '플랫폼별 특이 버그가 발생하고 있나요?',
  '엣지 케이스 처리가 미흡한 시스템이 있나요?',

  // 게임플레이 & 디자인
  '게임플레이 밸런스에서 조정이 필요한 부분은?',
  '레벨 디자인에서 개선이 필요한 부분은?',
  '플레이어 온보딩 경험을 어떻게 개선할까요?',
  '게임 내 경제 시스템에 밸런스 문제가 있나요?',
  '적 AI 행동 패턴이 의도대로 작동하나요?',
  '난이도 곡선이 의도한 대로 느껴지나요?',
  '플레이어가 막히는 구간이 있나요?',
  '핵심 게임 루프가 충분히 재미있나요?',
  '보상 시스템이 플레이어 동기를 잘 유지하나요?',
  '조작감(컨트롤)에 대한 피드백은 어떤가요?',
  '카메라 동작이 불편하다는 피드백이 있나요?',
  '스킬/아이템 간 시너지가 잘 설계되어 있나요?',
  '튜토리얼이 핵심 메카닉을 충분히 가르쳐주나요?',
  '게임 세션 길이가 적절한가요?',

  // 아트 & 비주얼
  '아트 방향성에 대한 최신 피드백은?',
  '캐릭터 애니메이션 퀄리티 현황은?',
  '컷씬 또는 연출에서 개선할 점은?',
  '환경 아트의 디테일 수준이 목표에 맞나요?',
  'VFX가 게임플레이 피드백을 잘 전달하나요?',
  '라이팅이 분위기를 잘 살리고 있나요?',
  'UI 비주얼이 전체 아트 스타일과 일치하나요?',
  '컬러 팔레트가 플랫폼 화면에서 잘 보이나요?',

  // UI/UX
  'UI/UX에서 혼란스럽다는 피드백이 있나요?',
  '접근성(accessibility) 기능은 준비됐나요?',
  'HUD 정보량이 너무 많거나 적지는 않나요?',
  '인벤토리/메뉴 탐색이 직관적인가요?',
  '폰트 가독성이 모든 해상도에서 괜찮은가요?',
  '컨트롤러와 키보드 UI 경험이 동등한가요?',

  // 사운드 & 음악
  '사운드 디자인 방향성은 잘 맞춰지고 있나요?',
  '효과음이 행동과 잘 동기화되어 있나요?',
  'BGM이 게임 분위기를 잘 지원하나요?',
  '음향 믹싱 밸런스에 문제가 있나요?',
  '보이스 오버 녹음 진행 상황은?',

  // 내러티브 & 스토리
  '내러티브 일관성에 문제가 있나요?',
  '다이얼로그 톤이 캐릭터 개성과 맞나요?',
  '스토리 페이싱이 플레이어를 잘 끌어가나요?',
  '월드 빌딩 디테일이 충분히 전달되나요?',
  '엔딩이 플레이어 기대에 부응할 것 같나요?',

  // 프로젝트 관리
  '이번 마일스톤의 우선순위를 정리해주세요.',
  '팀 간 정렬이 안 된 이슈가 있나요?',
  '최근 팀 회의에서 나온 주요 결정사항은?',
  '리소스(시간·인력) 부족으로 지연되는 작업은?',
  '다음 스프린트에서 집중해야 할 영역은?',
  '현재 가장 리스크가 높은 개발 항목은?',
  '현재 스코프에서 잘라낼 수 있는 기능이 있나요?',
  '출시 전 체크리스트에서 빠진 항목이 있나요?',
  '팀원 간 코드 리뷰 프로세스는 잘 돌아가고 있나요?',
  '마일스톤 일정이 현실적으로 달성 가능한가요?',
  '외주 또는 협력사와의 커뮤니케이션은 원활한가요?',
  '이번 주 블로커(blocker)가 된 이슈는?',

  // 플레이어 & 데이터
  '플레이어 피드백 중 반복되는 불만은?',
  '데이터 분석 지표 중 눈에 띄는 이상치는?',
  '유저 리텐션에 영향을 주는 요소가 뭔가요?',
  '플레이어가 가장 많이 이탈하는 지점은?',
  'A/B 테스트 결과에서 나온 인사이트는?',
  '플레이테스트 세션에서 공통된 반응은?',
  '리뷰/평점 트렌드에 변화가 있나요?',

  // 멀티플레이어 & 서버
  '멀티플레이어 동기화 이슈가 보고됐나요?',
  '서버 안정성 및 업타임 현황은?',
  '핵/치트 방지 시스템이 효과적으로 작동하나요?',
  '매치메이킹 품질에 대한 피드백은?',
  '동접자 급증 시 서버 스케일링 준비는 됐나요?',

  // 출시 & 마케팅
  '스토어 페이지·마케팅 자료 준비 상황은?',
  '플랫폼 인증(TRC/TCR) 대응 준비는 됐나요?',
  '로컬라이제이션 작업 진행 상황은?',
  '출시 타이밍 전략에 변경사항이 있나요?',
  '프레스 키트 및 미디어 대응 자료는 준비됐나요?',
  '패치 노트 작성 및 커뮤니티 공지 계획은?',

  // 혁신 & 개선
  '프로토타입 단계에서 검증이 필요한 아이디어는?',
  '현재 스테이지 중 가장 완성도가 낮은 곳은?',
  '경쟁 게임 대비 차별화 포인트가 명확한가요?',
  '플레이어가 오래 기억할 만한 순간이 있나요?',
  '현재 게임의 가장 강력한 훅(hook)은 무엇인가요?',
  '개발 워크플로우에서 자동화할 수 있는 작업은?',
  '다음 업데이트에서 가장 임팩트 있는 변화는?',
]

const BTN_STYLE: React.CSSProperties = {
  background: 'var(--color-bg-secondary)',
  color: 'var(--color-text-secondary)',
  border: '1px solid var(--color-border)',
}

export default function QuickQuestions() {
  const sendMessage = useChatStore(s => s.sendMessage)
  const question = useMemo(
    () => QUICK_QUESTIONS[Math.floor(Math.random() * QUICK_QUESTIONS.length)],
    []
  )
  const handleClick = useCallback(() => sendMessage(question), [sendMessage, question])

  return (
    <div className="flex justify-center" data-testid="quick-questions">
      <button
        onClick={handleClick}
        data-testid="quick-q-0"
        className="text-xs px-2.5 py-1 rounded-full transition-colors hover:opacity-80"
        style={BTN_STYLE}
      >
        {question}
      </button>
    </div>
  )
}
